!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).translator=e()}(this,(function(){"use strict";const t=["sq","ar","am","as","az","ee","ay","ga","et","or","om","eu","be","bm","bg","is","pl","bs","fa","bho","af","tt","da","de","dv","ti","doi","ru","fr","sa","tl","fi","fy","km","ka","gom","gu","gn","kk","ht","ko","ha","nl","ky","gl","ca","cs","kn","co","kri","hr","qu","ku","ckb","la","lv","lo","lt","ln","lg","lb","rw","ro","mg","mt","mr","ml","ms","mk","mai","mi","mni-mtei","mn","bn","lus","my","hmn","xh","zu","ne","no","pa","pt","ps","ny","ak","ja","sv","sm","sr","nso","st","si","eo","sk","sl","sw","gd","ceb","so","tg","te","ta","th","tr","tk","cy","ug","ur","uk","uz","es","iw","el","haw","sd","hu","sn","hy","ig","ilo","it","yi","hi","su","id","jw","en","yo","vi","zh-tw","zh-cn","ts"],e=["lzh","ikt","iu-latn","mn-cyrl","mn-mong","hsb","zh-hans","zh-hant","da","uk","uz","ur","nb","hy","ru","bg","tlh-latn","hr","otq","is","gl","ca","hu","af","kn","hi","id","gu","kk","iu","tk","tr","ty","sr-latn","sr-cyrl","or","cy","bn","yua","ne","ba","eu","he","el","ku","kmr","de","it","lv","cs","ti","fj","sk","sl","sw","pa","ja","ps","ky","ka","mi","to","fo","fr","fr-ca","pl","bs","fa","te","ta","th","ht","ga","et","sv","zu","lt","yue","so","ug","my","ro","lo","fi","mww","en","nl","fil","sm","pt","pt-pt","bo","es","vi","prs","dv","az","am","sq","ar","as","tt","ko","mk","mg","mr","ml","ms","mt","km"],a=["ar","pl","da","de","ru","fr","fi","ko","nl","cs","pt","ja","sv","th","tr","es","hu","en","it","vi","zh-CHS"],n=(t,e)=>t.map((t=>t.toLowerCase())).includes(e.toLowerCase());const r=new class{requestHandle(t,e,a={}){a.timeout||(a.timeout=3e4);const n="post"===(a?.method??"").toLowerCase()&&e;return a.headers||(a.headers={}),a.headers?.["content-type"]||(a.headers["content-type"]="application/x-www-form-urlencoded"),n&&("object"==typeof e&&(e=JSON.stringify(e),a.headers["content-type"]="application/json"),a.headers["content-length"]=e.length,a.body=e),new Promise(((e,n)=>{fetch(t,a).then((async t=>({response:t,data:await t.text()}))).then((t=>{e(this.responseBuilder(t.response,t.data))})).catch((t=>{n({cause:t,toString:()=>t.toString()})}))}))}responseBuilder(t,e){e=e.toString();try{e=JSON.parse(e)}catch(t){}let a=Object.fromEntries(t.headers.entries());return a["set-cookie"]&&t.headers.getAll?a["set-cookie"]=t.headers.getAll("set-cookie"):a["set-cookie"]&&(a["set-cookie"]=[...t.headers.entries()].filter((t=>"set-cookie"===t[0])).map((t=>t[1]))),{status:t.status,statusText:t.statusText,headers:a,data:e}}get(t,e){return e.method="GET",this.requestHandle(t,null,e)}post(t,e,a){return a.method="POST",this.requestHandle(t,e,a)}},o=function(t,e){let a=0;for(;a<e.length-2;a+=3){let n=e.charAt(a+2);n="a"<=n?n.charCodeAt(0)-87:Number(n),n="+"==e.charAt(a+1)?t>>>n:t<<n,t="+"==e.charAt(a)?t+n&4294967295:t^n}return t},s=(t="",e=[464385,3806605782])=>{let a;a=t instanceof Array?JSON.parse(JSON.stringify(t)).join(""):t;const n=function(t){let e=[],a=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);128>r?e[a++]=r:(2048>r?e[a++]=r>>6|192:(55296==(64512&r)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++n)),e[a++]=r>>18|240,e[a++]=r>>12&63|128):e[a++]=r>>12|224,e[a++]=r>>6&63|128),e[a++]=63&r|128)}return e}(a);let r=e[0];for(const t of n)r+=t,r=o(r,"+-a^+6");return r=o(r,"+-3^+b+-f"),r^=e[1]?e[1]+0:0,r<0&&(r=2147483648+(2147483647&r)),r%=1e6,r.toString()+"."+(r^e[0])},i=async(t="",a,o)=>{if(!t)return await Promise.reject("Empty text #MicrosoftTranslator ");if(!n(e,a||"en"))return await Promise.reject("Not supported target language #MicrosoftTranslator ");const s=await(async()=>{try{return(await r.get("https://edge.microsoft.com/translate/auth")).data}catch(t){return""}})();return s?await new Promise((async(e,n)=>{r.post(`https://api.cognitive.microsofttranslator.com/translate?from=&to=${a}&api-version=3.0&includeSentenceLength=true`,JSON.stringify(t instanceof Array?t.map((t=>({Text:t}))):[{Text:t}]),{headers:{"content-type":"application/json",authorization:`Bearer ${s}`}}).then((t=>{t.data&&t.data instanceof Array&&e(o?t.data:t.data.map((t=>(t?.translations||[])?.[0]?.text||"")).join("\n")),n(o?t.data:"Invalid content #MicrosoftTranslator ")})).catch((t=>{n(o?t:t.toString())}))})):await Promise.reject("Invalid jwt #MicrosoftTranslator ")};return async(e="",o,c,l)=>{let u={content:"",message:""};try{switch(o){case"google":u.content=await(async(e="",a,o)=>{if(!e)return await Promise.reject("Empty text #GoogleTranslate ");if(!n(t,a||"en"))return await Promise.reject("Not supported target language #GoogleTranslate ");let i=new URLSearchParams({anno:"4",client:"te_lib",format:"html",v:"1.0",key:"AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw",sl:"auto",tl:a||"en",tc:"1",sr:"1",tk:s(e),mode:"1"});return await new Promise((async(t,a)=>{r.post("https://translate.googleapis.com/translate_a/t?"+i.toString(),"q="+(e instanceof Array?e.map((t=>encodeURIComponent(t))).join("&q="):encodeURIComponent(e))).then((e=>{e.data&&e.data instanceof Array&&t(o?e.data:e.data.map((t=>t?.[0]||"")).join("\n")),a(o?e.data:"Invalid content #GoogleTranslate ")})).catch((t=>{a(o?t:t.toString())}))}))})(e,c,!!l);break;case"microsoft":u.content=await i(e,c,!!l);break;case"sogou":u.content=await(async(t="",e,o)=>{if(!t)return await Promise.reject("Empty text #SogouTranslator ");if(!n(a,e||"en"))return await Promise.reject("Not supported target language #SogouTranslator ");let s=JSON.stringify({from_lang:"auto",to_lang:e,trans_frag:t instanceof Array?t.map((t=>({text:t}))):[{text:t}]});return await new Promise((async(t,e)=>{r.post("https://go.ie.sogou.com/qbpc/translate",`S-Param=${s}`).then((a=>{a?.data?.data?.trans_result&&a?.data?.data?.trans_result instanceof Array&&t(o?a.data:a.data.data.trans_result.map((t=>t.trans_text)).join("\n")||""),e(o?a.data:"Invalid content #SogouTranslator ")})).catch((t=>{e(o?t:t.toString())}))}))})(e,c,!!l)}}catch(t){u.message=String(t)}return u}}));
//# sourceMappingURL=translator.min.js.map
