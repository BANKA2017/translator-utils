!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).translator=e()}(this,(function(){"use strict";var t=crypto||{getRandomValues:function(){return[0]},randomUUID:function(){return"00000000-0000-0000-0000-000000000000"}};const e=(t,e)=>t.map((t=>t.toLowerCase())).includes(e.toLowerCase());function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function n(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,a)}function a(t,e,r){return e&&function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(){o=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(e,r,n,a){var o=r&&r.prototype instanceof d?r:d,i=Object.create(o.prototype);return u(i,"_invoke",function(e,r,n){var a=1;return function(o,i){if(3===a)throw Error("Generator is already running");if(4===a){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=x(s,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===a)throw a=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=3;var u=f(e,r,n);if("normal"===u.type){if(a=n.done?4:2,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=4,n.method="throw",n.arg=u.arg)}}}(e,n,new T(a||[])),!0),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h={};function d(){}function p(){}function m(){}var y={};u(y,i,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(A([])));v&&v!==r&&n.call(v,i)&&(y=v);var b=m.prototype=d.prototype=Object.create(y);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,o,i,s){var c=f(t[a],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,s)}),(function(t){r("throw",t,i,s)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,s)}))}s(c.arg)}var a;u(this,"_invoke",(function(t,n){function o(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(o,o):o()}),!0)}function x(e,r){var n=r.method,a=e.i[n];if(a===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=f(a,e.i,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var i=o.arg;return i?i.done?(r[e.r]=i.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function j(t){this.tryEntries.push(t)}function S(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function T(t){this.tryEntries=[[-1]],t.forEach(j,this),this.reset(!0)}function A(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return p.prototype=m,u(b,"constructor",m),u(m,"constructor",p),p.displayName=u(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},e.awrap=function(t){return{__await:t}},w(k.prototype),u(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new k(l(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){i.type="throw",i.arg=e,r.next=t}for(var a=r.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o[4],s=this.prev,c=o[1],u=o[2];if(-1===o[0])return n("end"),!1;if(!c&&!u)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<c)return this.method="next",this.arg=t,n(c),!0;if(s<u)return n(u),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var a=n;break}}a&&("break"===t||"continue"===t)&&a[0]<=e&&e<=a[2]&&(a=null);var o=a?a[4]:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a[2],h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var a=n.arg;S(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:A(e),r:r,n:n},"next"===this.method&&(this.arg=t),h}},e}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:e+""}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var u=a((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}),[{key:"requestHandle",value:function(t,e){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.timeout||(a.timeout=3e4);var i="post"===((null==a?void 0:a.method)||"").toLowerCase()&&e;a.headers||(a.headers={});var s=e instanceof FormData;return i&&!s&&(a.headers["content-type"]="application/x-www-form-urlencoded","object"===c(e)&&(e=JSON.stringify(e),a.headers["content-type"]="application/json"),a.headers["content-length"]=e.length,a.body=e),new Promise((function(e,i){var s,c;"function"==typeof fetch?fetch(t,a).then((s=o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,e.arrayBuffer();case 3:return t.t1=t.sent,t.abrupt("return",{response:t.t0,data:t.t1});case 5:case"end":return t.stop()}}),t)})),c=function(){var t=this,e=arguments;return new Promise((function(r,a){var o=s.apply(t,e);function i(t){n(o,r,a,i,c,"next",t)}function c(t){n(o,r,a,i,c,"throw",t)}i(void 0)}))},function(t){return c.apply(this,arguments)})).then((function(t){e(r.responseBuilder(t.response,t.data,a))})).catch((function(t){i({cause:t,toString:function(){return t.toString()}})})):i({cause:"NOT SUPPORT fetch OR XMLHttpRequest",toString:"NOT SUPPORT fetch OR XMLHttpRequest"})}))}},{key:"isJson",value:function(t){try{return JSON.parse(t),!0}catch(t){return!1}}},{key:"responseBuilder",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"arraybuffer"===(null==r?void 0:r.responseType)||(e=(new TextDecoder).decode(e),this.isJson(e)&&(e=JSON.parse(e)));var n=Object.fromEntries(t.headers.entries());return n["set-cookie"]&&t.headers.getSetCookie?n["set-cookie"]=t.headers.getSetCookie():n["set-cookie"]&&t.headers.getAll?n["set-cookie"]=t.headers.getAll("set-cookie"):n["set-cookie"]&&(n["set-cookie"]=i(t.headers.entries()).filter((function(t){return"set-cookie"===t[0]})).map((function(t){return t[1]}))),{status:t.status,statusText:t.statusText,headers:n,data:e}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.method="GET",this.requestHandle(t,null,e)}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.method="POST",this.requestHandle(t,e,r)}}]),l=new u;const f=["aa","ab","ace","ach","af","ak","alz","am","ar","as","av","awa","ay","az","ba","bal","ban","bbc","bci","be","bem","ber","ber-latn","bew","bg","bho","bik","bm","bm-nkoo","bn","bo","br","bs","bts","btx","bua","ca","ce","ceb","cgg","ch","chk","chm","ckb","cnh","co","crh","crs","cs","cv","cy","da","de","din","doi","dov","dv","dyu","dz","ee","el","en","eo","es","et","eu","fa","fa-af","ff","fi","fj","fo","fon","fr","fur","fy","ga","gaa","gd","gl","gn","gom","gu","gv","ha","haw","hi","hil","hmn","hr","hrx","ht","hu","hy","iba","id","ig","ilo","is","it","iw","ja","jam","jw","ka","kac","kek","kg","kha","kk","kl","km","kn","ko","kr","kri","ktu","ku","kv","ky","la","lb","lg","li","lij","lmo","ln","lo","lt","ltg","luo","lus","lv","mad","mai","mak","mam","mfe","mg","mh","mi","min","mk","ml","mn","mni-mtei","mr","ms","ms-arab","mt","mwr","my","ndc-zw","ne","new","nhe","nl","no","nr","nso","nus","ny","oc","om","or","os","pa","pa-arab","pag","pam","pap","pl","ps","pt","pt-pt","qu","rn","ro","rom","ru","rw","sa","sah","sat-latn","scn","sd","se","sg","shn","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sus","sv","sw","szl","ta","tcy","te","tet","tg","th","ti","tiv","tk","tl","tn","to","tpi","tr","trp","ts","tt","tum","ty","tyv","udm","ug","uk","ur","uz","ve","vec","vi","war","wo","xh","yi","yo","yua","yue","zap","zh-cn","zh-tw","zu"],h=["af","am","ar","as","az","ba","bg","bho","bn","bo","brx","bs","ca","cs","cy","da","de","doi","dsb","dv","el","en","es","et","eu","fa","fi","fil","fj","fo","fr","fr-ca","ga","gl","gom","gu","ha","he","hi","hr","hsb","ht","hu","hy","id","ig","ikt","is","it","iu","iu-latn","ja","ka","kk","km","kmr","kn","ko","ks","ku","ky","ln","lo","lt","lug","lv","lzh","mai","mg","mi","mk","ml","mn-cyrl","mn-mong","mr","ms","mt","mww","my","nb","ne","nl","nso","nya","or","otq","pa","pl","prs","ps","pt","pt-pt","ro","ru","run","rw","sd","si","sk","sl","sm","sn","so","sq","sr-cyrl","sr-latn","st","sv","sw","ta","te","th","ti","tk","tlh-latn","tn","to","tr","tt","ty","ug","uk","ur","uz","vi","xh","yo","yua","yue","zh-hans","zh-hant","zu"],d=["af","am","ar","az","ba","be","bg","bn","bs","ca","ceb","cs","cv","cy","da","de","el","emj","en","eo","es","et","eu","fa","fi","fr","ga","gd","gl","gu","he","hi","hr","ht","hu","hy","id","is","it","ja","jv","ka","kazlat","kk","km","kn","ko","ky","la","lb","lo","lt","lv","mg","mhr","mi","mk","ml","mn","mr","mrj","ms","mt","my","ne","nl","no","pa","pap","pl","pt","ro","ru","sah","si","sjn","sk","sl","sq","sr","su","sv","sw","ta","te","tg","th","tl","tr","tt","udm","uk","ur","uz","uzbcyr","vi","xh","yi","zh","zu"],p=["ar","pl","da","de","ru","fr","fi","ko","nl","cs","pt","ja","sv","th","tr","es","hu","en","it","vi","zh-CHS"],m=()=>(t.randomUUID()||"00000000-0000-0000-0000-000000000000").replaceAll("-",""),y=async(t="",r="auto",n,a,o={})=>{if(!t)return Promise.reject("Empty text #YandexTranslator ");if(!e(d,n||"en")||"auto"!==r&&!e(d,r||"en"))return Promise.reject("Unsupported target language #YandexTranslator ");const i="auto"===r?await(async(t="")=>{if(!t)return"_";Array.isArray(t)&&(t=t.join("\n"));try{const e=await l.get("https://translate.yandex.net/api/v1/tr.json/detect?"+new URLSearchParams({sid:m(),srv:"android",text:t}).toString());return 200===e.data?.code&&e.data?.lang&&e.data?.lang||"_"}catch(t){return"_"}})((Array.isArray(t)?t.join(" "):t).replaceAll(/<a id=\d><><\/a>/gm,"")):r;if("_"===i)return Promise.reject("Unsupported source language #YandexTranslator ");let s=new URLSearchParams({translateMode:"context",context_title:"Twitter Monitor Translator",id:`${m()}-0-0`,srv:"yabrowser",lang:`${i}-${n}`,format:"html",options:"2"});return new Promise((async(e,r)=>{l.get("https://browser.translate.yandex.net/api/v1/tr.json/translate?"+s.toString()+"&text="+(t instanceof Array?t.map((t=>encodeURIComponent(t))).join("&text="):encodeURIComponent(t))).then((t=>{t?.data?.text&&t?.data?.text instanceof Array&&e(a?t.data:t.data.text.join("\n")),r(a?t.data:"Invalid content #YandexTranslator ")})).catch((t=>{r(a?t:t.toString())}))}))},g=function(t,e){let r=0;for(;r<e.length-2;r+=3){let n=e.charAt(r+2);n="a"<=n?n.charCodeAt(0)-87:Number(n),n="+"==e.charAt(r+1)?t>>>n:t<<n,t="+"==e.charAt(r)?t+n&4294967295:t^n}return t},v=(t="",e=[464385,3806605782])=>{let r;r=t instanceof Array?JSON.parse(JSON.stringify(t)).join(""):t;const n=function(t){let e=[],r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);128>a?e[r++]=a:(2048>a?e[r++]=a>>6|192:(55296==(64512&a)&&n+1<t.length&&56320==(64512&t.charCodeAt(n+1))?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++n)),e[r++]=a>>18|240,e[r++]=a>>12&63|128):e[r++]=a>>12|224,e[r++]=a>>6&63|128),e[r++]=63&a|128)}return e}(r);let a=e[0];for(const t of n)a+=t,a=g(a,"+-a^+6");return a=g(a,"+-3^+b+-f"),a^=e[1]?e[1]+0:0,a<0&&(a=2147483648+(2147483647&a)),a%=1e6,a.toString()+"."+(a^e[0])},b=async(t="",r="auto",n,a,o={})=>{if(!t)return Promise.reject("Empty text #MicrosoftTranslator ");if(!e(h,n||"en")||"auto"!==r&&!e(h,r||"en"))return Promise.reject("Unsupported target language #MicrosoftTranslator ");let i="";return i=o.jwt&&"string"==typeof o.jwt?o.jwt:await(async()=>{try{return(await l.get("https://edge.microsoft.com/translate/auth")).data}catch(t){return""}})(),i?new Promise((async(e,o)=>{l.post(`https://api.cognitive.microsofttranslator.com/translate?from=${"auto"===r?"":r}&to=${n}&api-version=3.0&includeSentenceLength=true`,t instanceof Array?t.map((t=>({Text:t}))):[{Text:t}],{headers:{authorization:`Bearer ${i}`}}).then((t=>{t.data&&t.data instanceof Array&&e(a?t.data:t.data.map((t=>(t?.translations||[])?.[0]?.text||"")).join("\n")),o(a?t.data:"Invalid content #MicrosoftTranslator ")})).catch((t=>{o(a?t:t.toString())}))})):Promise.reject("Invalid jwt #MicrosoftTranslator ")};return async(t="",r,n,a,o,i={})=>{let s={content:"",message:""};try{switch(r){case"google":case"google_browser":s.content=await(async(t="",r="auto",n,a)=>{if(!t)return Promise.reject("Empty text #GoogleTranslate ");if(!e(f,n||"en")||"auto"!==r&&!e(f,r||"en"))return Promise.reject("Unsupported target language #GoogleTranslate ");let o=new URLSearchParams({anno:"4",client:"te_lib",format:"html",v:"1.0",key:"AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw",sl:r,tl:n||"en",tc:"1",sr:"1",tk:v(t),mode:"1"});return new Promise((async(e,r)=>{l.post("https://translate.googleapis.com/translate_a/t?"+o.toString(),"q="+(t instanceof Array?t.map((t=>encodeURIComponent(t))).join("&q="):encodeURIComponent(t))).then((t=>{t.data&&t.data instanceof Array&&e(a?t.data:t.data.map((t=>Array.isArray(t)?t?.[0]||"":t||"")).join("\n")),r(a?t.data:"Invalid content #GoogleTranslate ")})).catch((t=>{r(a?t:t.toString())}))}))})(t,n,a,!!o,i);break;case"google_browser_v2":s.content=await(async(t="",r="en",n,a)=>t?"auto"!==r&&e(f,n||"en")&&e(f,r||"en")?new Promise((async(e,o)=>{l.post("https://translation.googleapis.com/language/translate/v2?key=AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw",{q:Array.isArray(t)?t.join("\n"):t,source:r,target:n,format:"text"}).then((t=>{t.data&&t.data?.data?.translations instanceof Array&&e(a?t.data:t.data.data.translations.map((t=>t?.translatedText||"")).join("\n")),o(a?t.data:"Invalid content #GoogleTranslate ")})).catch((t=>{o(a?t:t.toString())}))})):Promise.reject("Unsupported target language #GoogleTranslate "):Promise.reject("Empty text #GoogleTranslate "))(t,n,a,!!o,i);break;case"microsoft":case"microsoft_browser":s.content=await b(t,n,a,!!o,i);break;case"microsoft_browser_v2":s.content=await(async(t="",r="auto",n,a)=>t?!e(h,n||"en")||"auto"!==r&&!e(h,r||"en")?Promise.reject("Unsupported target language #MicrosoftTranslatorV2 "):new Promise((async(e,o)=>{l.post(`https://edge.microsoft.com/translate/translatetext?from=${"auto"===r?"":r}&to=${n}`,t instanceof Array?t:[t]).then((t=>{t.data&&t.data instanceof Array&&e(a?t.data:t.data.map((t=>(t?.translations||[])?.[0]?.text||"")).join("\n")),o(a?t.data:"Invalid content #MicrosoftTranslatorV2 ")})).catch((t=>{o(a?t:t.toString())}))})):Promise.reject("Empty text #MicrosoftTranslatorV2 "))(t,n,a,!!o,i);break;case"sogou":case"sogou_browser":s.content=await(async(t="",r="auto",n,a)=>{if(!t)return Promise.reject("Empty text #SogouTranslator ");if(!e(p,n||"en")||"auto"!==r&&!e(p,r||"en"))return Promise.reject("Unsupported target language #SogouTranslator ");let o=JSON.stringify({from_lang:r,to_lang:n,trans_frag:t instanceof Array?t.map((t=>({text:t}))):[{text:t}]});return new Promise((async(t,e)=>{const r=new FormData;r.append("S-Param",o),l.post("https://go.ie.sogou.com/qbpc/translate",r).then((r=>{r?.data?.data?.trans_result&&r?.data?.data?.trans_result instanceof Array&&t(a?r.data:r.data.data.trans_result.map((t=>t.trans_text)).join("\n")||""),e(a?r.data:"Invalid content #SogouTranslator ")})).catch((t=>{e(a?t:t.toString())}))}))})(t,n,a,!!o,i);break;case"yandex":case"yandex_browser":s.content=await y(t,n,a,!!o,i)}}catch(t){s.message=String(t)}return s}}));
//# sourceMappingURL=translator.min.js.map
